<!DOCTYPE HTML>
<script>
  document.addEventListener("DOMContentLoaded", function () {
  console.log("ðŸ“¦ DOMContentLoaded : DOM prÃªt");

  document.addEventListener("change", function (e) {
    if (!e.target.name) return;
    let value;
    if (e.target.type === "checkbox") {
      const all = document.querySelectorAll(`input[type="checkbox"][name="${e.target.name}"]`);
      value = Array.from(all).filter(c => c.checked).map(c => c.value);
    } else {
      value = e.target.value;
    }
    localStorage.setItem(e.target.name, JSON.stringify(value));
    updateConditionals();
  });
  
  function bindLiveConditionalTriggers() {
  document.querySelectorAll("input, select, textarea").forEach(el => {
    el.addEventListener("change", updateConditionals);
    el.addEventListener("input", updateConditionals);
    el.addEventListener("blur", updateConditionals);
  });
}

  
  



  bindLiveConditionalTriggers();
  updateConditionals();
  setTimeout(updateConditionals, 300);
});

window.onload = function () {
  console.log("ðŸŽ¯ window.onload : ressources chargÃ©es");
  updateConditionals();
};

</script>